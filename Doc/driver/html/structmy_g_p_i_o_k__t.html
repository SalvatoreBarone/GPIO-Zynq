<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Zynq-7000 Driver Pack: Riferimenti per la struct myGPIOK_t</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Zynq-7000 Driver Pack
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">C implementation of some Driver for Zynq-7000 Family</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generato da Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Cerca');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Pagina&#160;Principale</span></a></li>
      <li><a href="modules.html"><span>Moduli</span></a></li>
      <li class="current"><a href="annotated.html"><span>Strutture&#160;dati</span></a></li>
      <li><a href="files.html"><span>File</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Cerca" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Strutture&#160;dati</span></a></li>
      <li><a href="classes.html"><span>Indice&#160;delle&#160;strutture&#160;dati</span></a></li>
      <li><a href="functions.html"><span>Campi&#160;dei&#160;dati</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structmy_g_p_i_o_k__t.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tutto</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Strutture dati</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>File</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Funzioni</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variabili</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Tipi enumerati (enum)</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Valori del tipo enumerato</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Definizioni</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Gruppi</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Campi</a>  </div>
  <div class="headertitle">
<div class="title">Riferimenti per la struct myGPIOK_t<div class="ingroups"><a class="el" href="group__my_g_p_i_o.html">MyGPIO</a> &raquo; <a class="el" href="group___linux-_driver.html">Linux-Driver</a> &raquo; <a class="el" href="group___kernel-_driver.html">Kernel-Driver</a> &raquo; <a class="el" href="group___kernel-_module.html">Kernel-Module</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Stuttura per l'astrazione di un device.  
 <a href="structmy_g_p_i_o_k__t.html#details">Continua...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Campi</h2></td></tr>
<tr class="memitem:acba682fe45d5a1501790dbdb1d99bd6a"><td class="memItemLeft" align="right" valign="top">struct cdev&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#acba682fe45d5a1501790dbdb1d99bd6a">cdev</a></td></tr>
<tr class="separator:acba682fe45d5a1501790dbdb1d99bd6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a1593ebe61611c4e29413903a373a5"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a42a1593ebe61611c4e29413903a373a5">irqNumber</a></td></tr>
<tr class="separator:a42a1593ebe61611c4e29413903a373a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a565a1848c3ae8026257a74cf169c6941"><td class="memItemLeft" align="right" valign="top">struct resource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a565a1848c3ae8026257a74cf169c6941">rsrc</a></td></tr>
<tr class="separator:a565a1848c3ae8026257a74cf169c6941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c4eb95350c67ccb239a8a39c43c09a"><td class="memItemLeft" align="right" valign="top">struct resource *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a18c4eb95350c67ccb239a8a39c43c09a">mreg</a></td></tr>
<tr class="separator:a18c4eb95350c67ccb239a8a39c43c09a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f87b53dc5049a349ef01aa586c0b5dc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a0f87b53dc5049a349ef01aa586c0b5dc">rsrc_size</a></td></tr>
<tr class="separator:a0f87b53dc5049a349ef01aa586c0b5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5aef493b3c2bc9d1f036ce0acea9bba"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#af5aef493b3c2bc9d1f036ce0acea9bba">vrtl_addr</a></td></tr>
<tr class="separator:af5aef493b3c2bc9d1f036ce0acea9bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a251570f8e6976ad87411093e330e7b4f"><td class="memItemLeft" align="right" valign="top">wait_queue_head_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a251570f8e6976ad87411093e330e7b4f">read_queue</a></td></tr>
<tr class="separator:a251570f8e6976ad87411093e330e7b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2080617f88cafd765430573afe7701d1"><td class="memItemLeft" align="right" valign="top">wait_queue_head_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a2080617f88cafd765430573afe7701d1">poll_queue</a></td></tr>
<tr class="separator:a2080617f88cafd765430573afe7701d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd94ecf2bef1aa7bd105577b660a112"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a6fd94ecf2bef1aa7bd105577b660a112">int_occurred</a></td></tr>
<tr class="separator:a6fd94ecf2bef1aa7bd105577b660a112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e1ddf972b4dc84dd331a0c72e5d9895"><td class="memItemLeft" align="right" valign="top">spinlock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a1e1ddf972b4dc84dd331a0c72e5d9895">slock_int</a></td></tr>
<tr class="separator:a1e1ddf972b4dc84dd331a0c72e5d9895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2da711ac290a9613b8d8af97f122b997"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#a2da711ac290a9613b8d8af97f122b997">total_irq</a></td></tr>
<tr class="separator:a2da711ac290a9613b8d8af97f122b997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac41bbc7fe03ef25b7f468275fb565d78"><td class="memItemLeft" align="right" valign="top">spinlock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy_g_p_i_o_k__t.html#ac41bbc7fe03ef25b7f468275fb565d78">sl_total_irq</a></td></tr>
<tr class="separator:ac41bbc7fe03ef25b7f468275fb565d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descrizione dettagliata</h2>
<div class="textblock"><p>Stuttura per l'astrazione di un device. </p>
<p>E' buona abitudine, se non quasi indispensabile, definire una struttura dati nella quale contenere tutto cio' che e' legato al device o al driver. In questo modulo viene usata la struttura <a class="el" href="structmy_g_p_i_o_k__t.html" title="Stuttura per l&#39;astrazione di un device. ">myGPIOK_t</a> per contenere tutto cio' che e' necessario al funzionamento del driver. </p>
</div><h2 class="groupheader">Documentazione dei campi</h2>
<a class="anchor" id="acba682fe45d5a1501790dbdb1d99bd6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct cdev cdev</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stuttura per l'astrazione di un device a caratteri, Il kernel usa, internamente, una struttura cdev per rappresentare i device a caratteri. Prima che il kernel invochi le funzioni definite dal driver per il device, bisogna allocare e registrare uno, o piu', oggetti cdev. In questo caso e' sufficiente allocare uno solo di questi oggetti. </p>

</div>
</div>
<a class="anchor" id="a6fd94ecf2bef1aa7bd105577b660a112"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t int_occurred</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag "interrupt occurred" Il valore viene settato dalla funzione <a class="el" href="group___kernel-_module.html#ga2fc230a12a97aa63e43b2dc4aec73511" title="Interrupt-handler. ">myGPIOK_irq_handler()</a> al manifestarsi di un interrupt, prima di risvegliare i processi in attesa che tale variabile assuma uno specifico valore. I valori con cui questo flag puo' essere settato sono due:</p><ul>
<li>MYGPIOK_SREAD : per la read bloccante.</li>
<li>MYGPIOK_AREAD : pre la read non bloccante.</li>
</ul>
<p>I processi che effettuano read() bloccante restano bloccati finoche' int_occurred &amp; MYGPIO_SREAD != 0 </p>

</div>
</div>
<a class="anchor" id="a42a1593ebe61611c4e29413903a373a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t irqNumber</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>interrupt-number a cui il device e' connesso. Restituito dalla chiamata alla funzione irq_of_parse_and_map() </p>

</div>
</div>
<a class="anchor" id="a18c4eb95350c67ccb239a8a39c43c09a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct resource* mreg</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>puntatre alla regione di memoria cui il device e' mapapto </p>

</div>
</div>
<a class="anchor" id="a2080617f88cafd765430573afe7701d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wait_queue_head_t poll_queue</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>wait queue per la system-call poll() </p>

</div>
</div>
<a class="anchor" id="a251570f8e6976ad87411093e330e7b4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wait_queue_head_t read_queue</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>wait queue per la system-call read() Una chiamata a read() potrebbe arrivare quando i dati non sono disponibili, ma potrebbero esserlo in futuro, oppure, una chiamata a write() potrebbe avvenire quando il device non e' in grado di accettare altri dati (perche' il suo buffer di ingresso potrebbe essere pieno). Il processo chiamante non ha la minima conoscenza delle dinamiche interne del device, per cui, nell'impossibilita' di servire la richiesta, il driver deve bloccare il processo e metterlo tra i processi "sleeping", fin quando la richiesta non puo' essere servita. Tutti i processi in attesa di un particolare evento vengono posti all'interno della stessa wait queue. In linux una wait queue viene implementata da una struttura dati wait_queue_head_t, definita in &lt;linux/wait.h&gt;. </p>

</div>
</div>
<a class="anchor" id="a565a1848c3ae8026257a74cf169c6941"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct resource rsrc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Struttura che astrae una risorsa device, dal punto di vista della memoria alla quale la risorsa e' mappata. In particolare i campi "start" ed "end" contengono, rispettivamente, il primo e l'ultimo indirizzo fisico a cui il device e' mappato. </p>

</div>
</div>
<a class="anchor" id="a0f87b53dc5049a349ef01aa586c0b5dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rsrc_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>rsrc.end - rsrc.start numero di indirizzi associati alla periferica. occorre per effettuare il mapping indirizzo fisico - indirizzo virtuale </p>

</div>
</div>
<a class="anchor" id="ac41bbc7fe03ef25b7f468275fb565d78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t sl_total_irq</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Spinlock usato per garantire l'accesso in mutua esclusione alla variabile total_irq da parte delle funzioni del modulo </p>

</div>
</div>
<a class="anchor" id="a1e1ddf972b4dc84dd331a0c72e5d9895"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t slock_int</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Spinlock usato per garantire l'accesso in mutua esclusione alla variabile int_occurred da parte delle funzioni del modulo. I semafori sono uno strumento potentissimo per per l'implementazione di sezioni critiche, ma non possono essere usati in codice non interrompibile. Gli spilock sono come i semafori, ma possono essere usati anche in codice non interrompibile, come puo' esserlo un modulo kernel. Sostanzialmente se uno spinlock e' gia' stato acquisito da qualcun altro, si entra in un hot-loop dal quale si esce solo quando chi possiede lo spinlock lo rilascia. Trattandosi di moduli kernel, e' di vitale importanza che la sezione critica sia quanto piu' piccola possibile. Ovviamente l'implementazione e' "un
po'" piu' complessa di come e' stata descritta, ma il concetto e' questo. Gli spinlock sono definiti in &lt;linux/spinlock.h&gt;. </p>

</div>
</div>
<a class="anchor" id="a2da711ac290a9613b8d8af97f122b997"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t total_irq</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>numero totale di interrupt manifestatesi </p>

</div>
</div>
<a class="anchor" id="af5aef493b3c2bc9d1f036ce0acea9bba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vrtl_addr</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>indirizzo virtuale della periferica </p>

</div>
</div>
<hr/>La documentazione per questa struct Ã¨ stata generata a partire dal seguente file:<ul>
<li>myGPIO/linux-driver/kernel_module/kernel_module/<a class="el" href="my_g_p_i_o_k_8c.html">myGPIOK.c</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structmy_g_p_i_o_k__t.html">myGPIOK_t</a></li>
    <li class="footer">Generato Mer 21 Giu 2017 11:45:22 per Zynq-7000 Driver Pack da
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
