<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zynq-7000 Driver Pack: Riferimenti per il file Src/Examples/mygpiok.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zynq-7000 Driver Pack
   &#160;<span id="projectnumber">3.2</span>
   </div>
   <div id="projectbrief">Implementazione C di device-driver per Xilinx Zynq-7000</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generato da Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Cerca');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Cerca');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mygpiok_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Strutture dati</a> &#124;
<a href="#define-members">Definizioni</a> &#124;
<a href="#func-members">Funzioni</a>  </div>
  <div class="headertitle">
<div class="title">Riferimenti per il file mygpiok.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &quot;<a class="el" href="my_g_p_i_o_8h_source.html">myGPIO.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="xil__gpio_8h_source.html">xil_gpio.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Grafo delle dipendenze di inclusione per mygpiok.c:</div>
<div class="dyncontent">
<div class="center"><img src="mygpiok_8c__incl.png" border="0" usemap="#_src_2_examples_2mygpiok_8c" alt=""/></div>
<map name="_src_2_examples_2mygpiok_8c" id="_src_2_examples_2mygpiok_8c">
<area shape="rect" id="node6" href="my_g_p_i_o_8h.html" title="myGPIO.h" alt="" coords="355,80,439,107"/>
<area shape="rect" id="node8" href="xil__gpio_8h.html" title="xil_gpio.h" alt="" coords="464,80,541,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Strutture dati</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structparam__t.html">param_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">La struttura raccoglie tutti i parametri di esecuzione del programma.  <a href="structparam__t.html#details">Continua...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Definizioni</h2></td></tr>
<tr class="memitem:a7a63b24ca5489eb3206598e3d90fe19c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mygpiok_8c.html#a7a63b24ca5489eb3206598e3d90fe19c">MODE_OFFSET</a>&#160;&#160;&#160;<a class="el" href="group__bare-metal.html#ga81a662103d6ed053978c0a9b4c273065">myGPIO_MODE_OFFSET</a></td></tr>
<tr class="separator:a7a63b24ca5489eb3206598e3d90fe19c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77d96306ed0e813f93c4c3f98b970b86"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mygpiok_8c.html#a77d96306ed0e813f93c4c3f98b970b86">WRITE_OFFSET</a>&#160;&#160;&#160;<a class="el" href="group__bare-metal.html#ga2e45778b6ca9ce6f5768b3f7a4557ce1">myGPIO_WRITE_OFFSET</a></td></tr>
<tr class="separator:a77d96306ed0e813f93c4c3f98b970b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32c3a5b42163e171daccde5b5d5de02"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mygpiok_8c.html#ad32c3a5b42163e171daccde5b5d5de02">READ_OFFSET</a>&#160;&#160;&#160;<a class="el" href="group__bare-metal.html#ga584d2dfece76e5762030d918d80592cc">myGPIO_READ_OFFSET</a></td></tr>
<tr class="separator:ad32c3a5b42163e171daccde5b5d5de02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funzioni</h2></td></tr>
<tr class="memitem:a05909651fa170a63e98e3f8e13451b7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mygpiok_8c.html#a05909651fa170a63e98e3f8e13451b7b">howto</a> (void)</td></tr>
<tr class="memdesc:a05909651fa170a63e98e3f8e13451b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stampa un messaggio che fornisce indicazioni sull'utilizzo del programma.  <a href="#a05909651fa170a63e98e3f8e13451b7b">Continua...</a><br /></td></tr>
<tr class="separator:a05909651fa170a63e98e3f8e13451b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d977fb03a14dedd76e1515d6d24ff4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mygpiok_8c.html#a65d977fb03a14dedd76e1515d6d24ff4">parse_args</a> (int argc, char **argv, <a class="el" href="structparam__t.html">param_t</a> *param)</td></tr>
<tr class="memdesc:a65d977fb03a14dedd76e1515d6d24ff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Effettua il parsing dei parametri passati al programma.  <a href="#a65d977fb03a14dedd76e1515d6d24ff4">Continua...</a><br /></td></tr>
<tr class="separator:a65d977fb03a14dedd76e1515d6d24ff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63fab82d87963c07f9557a5f5d5d3e86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mygpiok_8c.html#a63fab82d87963c07f9557a5f5d5d3e86">gpio_op</a> (<a class="el" href="structparam__t.html">param_t</a> *param)</td></tr>
<tr class="memdesc:a63fab82d87963c07f9557a5f5d5d3e86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Effettua operazioni su un device.  <a href="#a63fab82d87963c07f9557a5f5d5d3e86">Continua...</a><br /></td></tr>
<tr class="separator:a63fab82d87963c07f9557a5f5d5d3e86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mygpiok_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descrizione dettagliata</h2>
<div class="textblock"><dl class="section author"><dt>Autore</dt><dd>Salvatore Barone <a href="#" onclick="location.href='mai'+'lto:'+'sal'+'va'+'tor'+'.b'+'aro'+'ne'+'@gm'+'ai'+'l.c'+'om'; return false;">salva<span style="display: none;">.nosp@m.</span>tor.<span style="display: none;">.nosp@m.</span>baron<span style="display: none;">.nosp@m.</span>e@gm<span style="display: none;">.nosp@m.</span>ail.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>
<dl class="section date"><dt>Data</dt><dd>16 06 2017</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2017 Salvatore Barone <a href="#" onclick="location.href='mai'+'lto:'+'sal'+'va'+'tor'+'.b'+'aro'+'ne'+'@gm'+'ai'+'l.c'+'om'; return false;">salva<span style="display: none;">.nosp@m.</span>tor.<span style="display: none;">.nosp@m.</span>baron<span style="display: none;">.nosp@m.</span>e@gm<span style="display: none;">.nosp@m.</span>ail.c<span style="display: none;">.nosp@m.</span>om</a></dd></dl>
<p>This file is part of Zynq7000DriverPack</p>
<p>Zynq7000DriverPack is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or any later version.</p>
<p>Zynq7000DriverPack is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA. </p>
</div><h2 class="groupheader">Documentazione delle definizioni</h2>
<a id="a7a63b24ca5489eb3206598e3d90fe19c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a63b24ca5489eb3206598e3d90fe19c">&#9670;&nbsp;</a></span>MODE_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MODE_OFFSET&#160;&#160;&#160;<a class="el" href="group__bare-metal.html#ga81a662103d6ed053978c0a9b4c273065">myGPIO_MODE_OFFSET</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Esempi: </b></dt><dd><a class="el" href="mygpiok_8c-example.html#a10">mygpiok.c</a>, <a class="el" href="no_driver_8c-example.html#a5">noDriver.c</a>, e <a class="el" href="uio_8c-example.html#a5">uio.c</a>.</dd>
</dl>
</div>
</div>
<a id="ad32c3a5b42163e171daccde5b5d5de02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32c3a5b42163e171daccde5b5d5de02">&#9670;&nbsp;</a></span>READ_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_OFFSET&#160;&#160;&#160;<a class="el" href="group__bare-metal.html#ga584d2dfece76e5762030d918d80592cc">myGPIO_READ_OFFSET</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Esempi: </b></dt><dd><a class="el" href="mygpiok_8c-example.html#a12">mygpiok.c</a>, <a class="el" href="no_driver_8c-example.html#a13">noDriver.c</a>, e <a class="el" href="uio_8c-example.html#a12">uio.c</a>.</dd>
</dl>
</div>
</div>
<a id="a77d96306ed0e813f93c4c3f98b970b86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77d96306ed0e813f93c4c3f98b970b86">&#9670;&nbsp;</a></span>WRITE_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_OFFSET&#160;&#160;&#160;<a class="el" href="group__bare-metal.html#ga2e45778b6ca9ce6f5768b3f7a4557ce1">myGPIO_WRITE_OFFSET</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Esempi: </b></dt><dd><a class="el" href="mygpiok_8c-example.html#a11">mygpiok.c</a>, <a class="el" href="no_driver_8c-example.html#a9">noDriver.c</a>, e <a class="el" href="uio_8c-example.html#a9">uio.c</a>.</dd>
</dl>
</div>
</div>
<h2 class="groupheader">Documentazione delle funzioni</h2>
<a id="a63fab82d87963c07f9557a5f5d5d3e86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63fab82d87963c07f9557a5f5d5d3e86">&#9670;&nbsp;</a></span>gpio_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpio_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structparam__t.html">param_t</a> *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Effettua operazioni su un device. </p>
<dl class="params"><dt>Parametri</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">param</td><td>puntatore a struttura <a class="el" href="structparam__t.html" title="La struttura raccoglie tutti i parametri di esecuzione del programma. ">param_t</a>, contiene i vari parametri di esecuzione del programma.</td></tr>
  </table>
  </dd>
</dl>
<p>La funzione viene invocata dopo che sia stato eseguito il parsing dei parametri passati al programma quando esso viene invocato. è stata scritta per funzionare sia con il GPIO Xilinx che con il GPIO custom myGPIO. è possibile utilizzare il primo definendo la macro <b>XIL_GPIO</b>. Effettua, sul device, le operazioni impostate, in accordo con i parametri passati al programma alla sua invocazione. <br />
 Nel caso un cui si usi un driver ad-hoc, è possibile usare le funzioni read() e write() per interagire con il device, leggendo il valore dei registri o scrivendolo. Il driver myGPIOK mette a disposizione anche la funzione seek() che permette di scegliere quale registro leggere o scrivere. </p>
<h4>Impostazione della modalità di funzionamento</h4>
<p>Per impostare la modalità di funzionamento è necessario scrivere sul registro MODE. L'offset di tale registro è determinato in base al particolare device che si stà utilizzando. Dopo aver spostato la "testina di scrittura" sul registro MODE usando la funzione seek(), viene effettuata la scrittura su di esso usando la funzione write(). è possibile, definendo la macro <b>USE_PWRITE</b>, usare la funzione pwrite(), che combina le due operazioni.</p>
<h4>Operazione di scrittura</h4>
<p>Per impostare il valore dei pin del device è necessario scrivere sul registro WRITE. L'offset di tale registro è determinato in base al particolare device che si stà utilizzando. Dopo aver spostato la "testina di scrittura" sul registro WRITE usando la funzione seek(), viene effettuata la scrittura su di esso usando la funzione write(). è possibile, definendo la macro <b>USE_PWRITE</b>, usare la funzione pwrite(), che combina le due operazioni.</p>
<h4>Operazione di lettura con interrupt</h4>
<p>La lettura dei pin del device avviene mediante la chiamata alla funzione read(), dopo aver spostato la "testina di lettura" sul registro READ. L'offset di tale registro, come nei due casi precedenti, viene determinato in base al particolare device che si sta usando. è possibile, definendo la macro <b>USE_PREAD</b>, usare la funzione pread(), che combina le operazioni di seek() e read(). Il driver myGPIOK implementa un meccanismo di lettura bloccante: qualora non ci siano dati disponibili, il processo che chiama read() viene sospeso e messo in attesa che i dati siano disponibili. Quando arriva una interruzione dal device, il driver myGPIOK lo gestisce e risveglia i processi che erano stati messi precedentemente in attesa. Si legga la documentazione del driver myGPIOK per i dettagli.</p>
<dl><dt><b>Esempi: </b></dt><dd><a class="el" href="mygpiok_8c-example.html#a9">mygpiok.c</a>.</dd>
</dl>
</div>
</div>
<a id="a05909651fa170a63e98e3f8e13451b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05909651fa170a63e98e3f8e13451b7b">&#9670;&nbsp;</a></span>howto()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void howto </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stampa un messaggio che fornisce indicazioni sull'utilizzo del programma. </p>
<dl><dt><b>Esempi: </b></dt><dd><a class="el" href="mygpiok_8c-example.html#a0">mygpiok.c</a>.</dd>
</dl>
</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Esempi: </b></dt><dd><a class="el" href="mygpiok_8c-example.html#a13">mygpiok.c</a>.</dd>
</dl>
</div>
</div>
<a id="a65d977fb03a14dedd76e1515d6d24ff4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d977fb03a14dedd76e1515d6d24ff4">&#9670;&nbsp;</a></span>parse_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int parse_args </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structparam__t.html">param_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Effettua il parsing dei parametri passati al programma. </p>
<dl class="params"><dt>Parametri</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td></td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">param</td><td>puntatore a struttura <a class="el" href="structparam__t.html" title="La struttura raccoglie tutti i parametri di esecuzione del programma. ">param_t</a>, conterrà i vari parametri di esecuzione del programma.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Valori di ritorno</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>se il parsing ha successo </td></tr>
    <tr><td class="paramname">-1</td><td>se si verifica un errore </td></tr>
  </table>
  </dd>
</dl>
<h4>Parsing dei parametri del programma.</h4>
<p>Il parsing viene effettuato usando la funzione getopt(). </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"><span class="keywordtype">int</span> getopt(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * <span class="keyword">const</span> argv[], <span class="keyword">const</span> <span class="keywordtype">char</span> *optstring);</div></div><!-- fragment --><p> Essa prende in input i parametri argc ed argv passati alla funzione <a class="el" href="mygpiok_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> quando il programma viene invocato. Quando una delle stringhe che compongono argv comincia con il carattere '-', getopt() la considera una opzione. Il carattere immediatamente successivo il '-' identifica la particolare opzione. La funzione può essere chiamata ripetutamente, fino a quando non restituisce -1, ad indicare che sono stati analizzati tutti i parametri passati al programma. Quando getopt() trova un'opzione, restituisce quel carattere ed aggiorna la variabile globale optid, che punta al prossimo parametro contenuto in argv. La stringa optstring indica quali sono le opzioni considerate. Se una opzione è seguita da ':' vuol dire che essa è seguita da un argomento. Tale argomento può essere ottenuto mediante la variabile globale optarg.</p>
<h4>Parametri riconosciuti</h4>
<p>La funzione riconosce i parametri:</p><ul>
<li>'d' : seguito dal percorso del device /dev/myGPIOK col quale interagire</li>
<li>'w' : operazione di scrittura, seguito dal valore che si intende scrivere, in esadecimale; la scrittura verrà effettuata sul registro WRITE;</li>
<li>'m' : impostazione modalità, seguito dalla modalità col quale impostare il device; la scrittura verrà effettuata sul registro MODE;</li>
<li>'r' : operazione di lettura, primo di argomento; la lettura viene effettuata dal registro READ ed è non bloccante, nel senso che viene semplicemente letto il contenuto del registro.</li>
</ul>
<p>Se non viene specificato il device myGPIOK col quale interagire è impossibile continuare. Per questo motivo, in questo caso, la funzione restituisce -1, per cui il programma viene terminato.</p>
<h4>Accesso ad un device tramite il driver myGPIOK</h4>
<p>Ad ogni periferica compatibile con il driver myGPIOK è associato un file diverso in /dev/ attraverso il quale è possibile interagire con il device. Rispetto al driver UIO, non è necessario effettuare nessuna operazione di mapping, in quanto il driver myGPIOK tradurrà le sistem-call che normalmente verrevvero usate su un file, in operazioni specifiche per il device. L'accesso al device viene ottenuto mediante la system-call open(): </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><span class="keywordtype">int</span> open(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keywordtype">int</span> oflag, ...  );</div></div><!-- fragment --><p> la quale restituisce il descrittore del file /dev/myGPIOKx, usato nel seguito per effettuare le operazioni di I/O. I valori del parametro oflag specificano il modo in cui il file viene aperto. In questo caso viene usato O_RDWR, il quale garantisce accesso in lettura ed in scrittura. Altri valori sono O_RDONLY, il quale garantisce accesso in sola lettura, ed O_WRONLY, che, invece, garantisce accesso in sola scrittura. Se l'apertura del file non riesce è impossibile continuare. Per questo motivo, in questo caso, la funzione restituisce -1, per cui il programma viene terminato.</p>
<dl><dt><b>Esempi: </b></dt><dd><a class="el" href="mygpiok_8c-example.html#a2">mygpiok.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_413f4e031a85da0d68269c6fd2f76e1c.html">Src</a></li><li class="navelem"><a class="el" href="dir_1b70f4f506dadebaa011ded43b066ccb.html">Examples</a></li><li class="navelem"><a class="el" href="mygpiok_8c.html">mygpiok.c</a></li>
    <li class="footer">Generato Sab 29 Lug 2017 11:19:44 per Zynq-7000 Driver Pack da
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
